<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HiPerC: tbb_discretization.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HiPerC
   &#160;<span id="projectnumber">alpha</span>
   </div>
   <div id="projectbrief">High Performance Computing Strategies for Boundary Value Problems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3b82386e405079f7752a30a3a098c74a.html">cpu-tbb-diffusion</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tbb_discretization.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of boundary condition functions with TBB threading.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;tbb/tbb.h&gt;</code><br />
<code>#include &lt;tbb/task_scheduler_init.h&gt;</code><br />
<code>#include &lt;tbb/parallel_for.h&gt;</code><br />
<code>#include &lt;tbb/parallel_reduce.h&gt;</code><br />
<code>#include &lt;tbb/blocked_range2d.h&gt;</code><br />
<code>#include &quot;<a class="el" href="boundaries_8h_source.html">boundaries.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mesh_8h_source.html">mesh.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="numerics_8h_source.html">numerics.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tbb_discretization.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="tbb__discretization_8cpp__incl.png" border="0" usemap="#atbb__discretization_8cpp" alt=""/></div>
<map name="atbb__discretization_8cpp" id="atbb__discretization_8cpp">
<area shape="rect" title="Implementation of boundary condition functions with TBB threading." alt="" coords="568,5,715,32"/>
<area shape="rect" title=" " alt="" coords="5,87,67,114"/>
<area shape="rect" title=" " alt="" coords="91,87,163,114"/>
<area shape="rect" title=" " alt="" coords="187,80,319,121"/>
<area shape="rect" title=" " alt="" coords="344,87,461,114"/>
<area shape="rect" title=" " alt="" coords="485,87,627,114"/>
<area shape="rect" title=" " alt="" coords="651,87,803,114"/>
<area shape="rect" href="boundaries_8h.html" title="Declaration of boundary condition function prototypes." alt="" coords="827,87,922,114"/>
<area shape="rect" href="mesh_8h.html" title="Declaration of mesh function prototypes for diffusion benchmarks." alt="" coords="947,87,1011,114"/>
<area shape="rect" href="numerics_8h.html" title="Declaration of Laplacian operator and analytical solution functions." alt="" coords="1035,87,1120,114"/>
<area shape="rect" href="timer_8h.html" title="Declaration of timer function prototypes for diffusion benchmarks." alt="" coords="1144,87,1205,114"/>
<area shape="rect" href="type_8h.html" title="Definition of scalar data type and Doxygen diffusion group." alt="" coords="951,169,1007,196"/>
</map>
</div>
</div>
<p><a href="tbb__discretization_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a186ab4f0a32122bc5a35462b7c7bc478"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tbb__discretization_8cpp.html#a186ab4f0a32122bc5a35462b7c7bc478">compute_convolution</a> (<a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **conc_old, <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **conc_lap, <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **mask_lap, const int nx, const int ny, const int nm)</td></tr>
<tr class="memdesc:a186ab4f0a32122bc5a35462b7c7bc478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform the convolution of the mask matrix with the composition matrix.  <a href="tbb__discretization_8cpp.html#a186ab4f0a32122bc5a35462b7c7bc478">More...</a><br /></td></tr>
<tr class="separator:a186ab4f0a32122bc5a35462b7c7bc478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0ed027a1fe66708b81f92e50b9b5979"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tbb__discretization_8cpp.html#ae0ed027a1fe66708b81f92e50b9b5979">update_composition</a> (<a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **conc_old, <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **conc_lap, <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **conc_new, const int nx, const int ny, const int nm, const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> D, const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> dt)</td></tr>
<tr class="memdesc:ae0ed027a1fe66708b81f92e50b9b5979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update composition field using explicit Euler discretization (forward-time centered space)  <a href="tbb__discretization_8cpp.html#ae0ed027a1fe66708b81f92e50b9b5979">More...</a><br /></td></tr>
<tr class="separator:ae0ed027a1fe66708b81f92e50b9b5979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab32d4d1477f72196d7887f6816d81c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tbb__discretization_8cpp.html#aab32d4d1477f72196d7887f6816d81c5">check_solution_lambda</a> (<a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **conc_new, <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **conc_lap, const int nx, const int ny, const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> dx, const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> dy, const int nm, const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> elapsed, const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> D, <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> *rss)</td></tr>
<tr class="separator:aab32d4d1477f72196d7887f6816d81c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of boundary condition functions with TBB threading. </p>

<p class="definition">Definition in file <a class="el" href="tbb__discretization_8cpp_source.html">tbb_discretization.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aab32d4d1477f72196d7887f6816d81c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab32d4d1477f72196d7887f6816d81c5">&#9670;&nbsp;</a></span>check_solution_lambda()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_solution_lambda </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **&#160;</td>
          <td class="paramname"><em>conc_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **&#160;</td>
          <td class="paramname"><em>conc_lap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a>&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a>&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a>&#160;</td>
          <td class="paramname"><em>elapsed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a>&#160;</td>
          <td class="paramname"><em>D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> *&#160;</td>
          <td class="paramname"><em>rss</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tbb__discretization_8cpp_source.html#l00059">59</a> of file <a class="el" href="tbb__discretization_8cpp_source.html">tbb_discretization.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tbb__discretization_8cpp_aab32d4d1477f72196d7887f6816d81c5_icgraph.png" border="0" usemap="#atbb__discretization_8cpp_aab32d4d1477f72196d7887f6816d81c5_icgraph" alt=""/></div>
<map name="atbb__discretization_8cpp_aab32d4d1477f72196d7887f6816d81c5_icgraph" id="atbb__discretization_8cpp_aab32d4d1477f72196d7887f6816d81c5_icgraph">
<area shape="rect" title=" " alt="" coords="104,5,263,32"/>
<area shape="rect" href="tbb__main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Run simulation using input parameters specified on the command line." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a186ab4f0a32122bc5a35462b7c7bc478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a186ab4f0a32122bc5a35462b7c7bc478">&#9670;&nbsp;</a></span>compute_convolution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_convolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **const&#160;</td>
          <td class="paramname"><em>conc_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **&#160;</td>
          <td class="paramname"><em>conc_lap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **const&#160;</td>
          <td class="paramname"><em>mask_lap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform the convolution of the mask matrix with the composition matrix. </p>
<p>If the convolution mask is the Laplacian stencil, the convolution evaluates the discrete Laplacian of the composition field. Other masks are possible, for example the Sobel filters for edge detection. This function is general purpose: as long as the dimensions <em>nx</em>, <em>ny</em>, and <em>nm</em> are properly specified, the convolution will be correctly computed. </p>

<p class="definition">Definition at line <a class="el" href="tbb__discretization_8cpp_source.html#l00022">22</a> of file <a class="el" href="tbb__discretization_8cpp_source.html">tbb_discretization.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tbb__discretization_8cpp_a186ab4f0a32122bc5a35462b7c7bc478_icgraph.png" border="0" usemap="#atbb__discretization_8cpp_a186ab4f0a32122bc5a35462b7c7bc478_icgraph" alt=""/></div>
<map name="atbb__discretization_8cpp_a186ab4f0a32122bc5a35462b7c7bc478_icgraph" id="atbb__discretization_8cpp_a186ab4f0a32122bc5a35462b7c7bc478_icgraph">
<area shape="rect" title="Perform the convolution of the mask matrix with the composition matrix." alt="" coords="104,5,249,32"/>
<area shape="rect" href="openmp__main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Run simulation using input parameters specified on the command line." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="ae0ed027a1fe66708b81f92e50b9b5979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0ed027a1fe66708b81f92e50b9b5979">&#9670;&nbsp;</a></span>update_composition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_composition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **&#160;</td>
          <td class="paramname"><em>conc_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **&#160;</td>
          <td class="paramname"><em>conc_lap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a> **&#160;</td>
          <td class="paramname"><em>conc_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a>&#160;</td>
          <td class="paramname"><em>D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type_8h.html#ab25cc4c4d0a09d9da9582fdcfc6185b5">fp_t</a>&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update composition field using explicit Euler discretization (forward-time centered space) </p>

<p class="definition">Definition at line <a class="el" href="tbb__discretization_8cpp_source.html#l00043">43</a> of file <a class="el" href="tbb__discretization_8cpp_source.html">tbb_discretization.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tbb__discretization_8cpp_ae0ed027a1fe66708b81f92e50b9b5979_icgraph.png" border="0" usemap="#atbb__discretization_8cpp_ae0ed027a1fe66708b81f92e50b9b5979_icgraph" alt=""/></div>
<map name="atbb__discretization_8cpp_ae0ed027a1fe66708b81f92e50b9b5979_icgraph" id="atbb__discretization_8cpp_ae0ed027a1fe66708b81f92e50b9b5979_icgraph">
<area shape="rect" title="Update composition field using explicit Euler discretization (forward&#45;time centered space)" alt="" coords="104,5,243,32"/>
<area shape="rect" href="openmp__main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Run simulation using input parameters specified on the command line." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
